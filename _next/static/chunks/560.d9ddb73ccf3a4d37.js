"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[560],{5560:function(e,t,n){n.r(t);var l=n(3827),i=n(4090),a=n(2963),r=n(2874),o=n.n(r);t.default=()=>{var e,t,n;let[r,s]=(0,i.useState)(null),[d,u]=(0,i.useState)([]),[c,p]=(0,i.useState)(20),[h,g]=(0,i.useState)("#000000"),[f,x]=(0,i.useState)("Arial"),[m,v]=(0,i.useState)(.5),[w,j]=(0,i.useState)(null),b=(0,i.useRef)(null),y=(0,i.useRef)(null),N=(0,i.useRef)(null),[C,E]=(0,i.useState)("png"),S=(e,t)=>{let n=e.target.position();u(e=>e.map(e=>e.id===t?{...e,position:{x:n.x,y:n.y}}:e))},k=async()=>{if(b.current){let e=await o()(b.current.container()),t=document.createElement("a");t.href=e.toDataURL("image/".concat(C)),t.download="edited-image.".concat(C),t.click()}},R=e=>{j(e),setTimeout(()=>{var e;null===(e=N.current)||void 0===e||e.focus()},0)},A=e=>{g(e),u(t=>t.map(t=>({...t,fontColor:e})))};return(0,i.useEffect)(()=>{let e=()=>{if(y.current){let e=y.current.offsetWidth,t=y.current.offsetHeight;b.current.width(e),b.current.height(t)}};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}},[]),(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){let t=new Image;t.src=URL.createObjectURL(e.target.files[0]),t.onload=()=>{s(t)}}}}),(0,l.jsxs)("div",{className:"mt-4 flex space-x-2",children:[(0,l.jsx)("input",{type:"color",value:h,onChange:e=>A(e.target.value)}),(0,l.jsx)("input",{type:"number",value:c,onChange:e=>p(Number(e.target.value)),className:"w-16 border p-2",placeholder:"Font size"}),(0,l.jsxs)("select",{value:f,onChange:e=>x(e.target.value),className:"border p-2",children:[(0,l.jsx)("option",{value:"Arial",children:"Arial"}),(0,l.jsx)("option",{value:"Courier New",children:"Courier New"}),(0,l.jsx)("option",{value:"Georgia",children:"Georgia"}),(0,l.jsx)("option",{value:"Times New Roman",children:"Times New Roman"}),(0,l.jsx)("option",{value:"Verdana",children:"Verdana"})]}),(0,l.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:m,onChange:e=>v(Number(e.target.value)),className:"w-32"}),(0,l.jsxs)("select",{value:C,onChange:e=>E(e.target.value),className:"border p-2",children:[(0,l.jsx)("option",{value:"png",children:"PNG"}),(0,l.jsx)("option",{value:"jpeg",children:"JPEG"}),(0,l.jsx)("option",{value:"webp",children:"WEBP"})]}),(0,l.jsx)("button",{onClick:k,className:"bg-blue-500 p-2 text-white",children:"Download"}),(0,l.jsx)("button",{onClick:()=>{let e={id:Date.now(),content:"New Text",position:{x:100,y:100},fontSize:c,fontColor:h,fontFamily:f};u(t=>[...t,e])},className:"bg-green-500 p-2 text-white",children:"Add Text"})]}),(0,l.jsxs)("div",{className:"relative mt-4 w-full border",ref:y,style:{height:"600px"},children:[(0,l.jsx)(a.Hf,{ref:b,width:800,height:600,children:(0,l.jsx)(a.mh,{children:r&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.Ee,{image:r,width:800,height:600}),(0,l.jsx)(a.UL,{x:0,y:0,width:800,height:600,fill:"black",opacity:m}),d.map(e=>(0,l.jsx)(i.Fragment,{children:w!==e.id&&(0,l.jsx)(a.xv,{text:e.content,fontSize:e.fontSize,fill:e.fontColor,fontFamily:e.fontFamily,x:e.position.x,y:e.position.y,draggable:!0,onDragEnd:t=>S(t,e.id),onClick:()=>R(e.id)})},e.id))]})})}),null!==w&&(0,l.jsx)("div",{ref:N,contentEditable:!0,className:"absolute left-0 border border-gray-300 p-1",style:{left:(null===(e=d.find(e=>e.id===w))||void 0===e?void 0:e.position.x)||0,top:(null===(t=d.find(e=>e.id===w))||void 0===t?void 0:t.position.y)||0,fontSize:c,color:h,fontFamily:f,minWidth:"50px",textAlign:"left",whiteSpace:"pre-wrap",overflowWrap:"break-word",zIndex:1,backgroundColor:"rgba(255, 255, 255, 0)",height:"auto",minHeight:"20px"},onBlur:()=>{null!==w&&N.current&&u(e=>e.map(e=>{var t;return e.id===w?{...e,content:(null==N?void 0:null===(t=N.current)||void 0===t?void 0:t.innerText)||""}:e})),j(null)},onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();let t=window.getSelection(),n=null==t?void 0:t.getRangeAt(0);if(n){let e=document.createElement("br");n.insertNode(e),n.setStartAfter(e),n.collapse(!0),null==t||t.removeAllRanges(),null==t||t.addRange(n)}}},suppressContentEditableWarning:!0,children:null===(n=d.find(e=>e.id===w))||void 0===n?void 0:n.content})]})]})}}}]);